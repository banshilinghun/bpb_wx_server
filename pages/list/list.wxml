<!--pages/list/list.wxml-->
<view class='list-root'>
  <!-- header -->
  <view id='header'>
    <radio-group class="radio-group" bindchange="listChange">
      <label wx:for="{{ carList }}" wx:for-index="idx" wx:key="item.value" class="radio {{ idx == tabIndex ? 'active' : ''}}">
        <radio class="radio-item" value="{{ item.value }}" checked="{{ idx==0 }}" />{{item.name}}
      </label>
    </radio-group>

    <view class='b-task-wrapper'>
      <view wx:if='{{ tabIndex == 0 }}' class='b-task-middle'>
        <text>预约总数: {{ subNumber }}人</text>
      </view>
      <view wx:if='{{ tabIndex == 1 }}' class='b-task-sign'>
        <text>已签到: {{ signNumber }}人</text>
      </view>
      <view wx:if='{{ tabIndex == 2 }}' class='b-task-finsh'>
        <view class='b-finsh-number'>
          <text>已完成: {{ finishNumber }}人</text>
        </view>
        <view class='b-finish-time'>
          <text>平均用时: {{ avgTime }}分</text>
        </view>
      </view>
    </view>

    <!-- 输入框 -->
    <view class="track-bg" wx:if='{{ tabIndex != 2 }}'>
      <view class="track-input-block">
        <input id="carcode" name="carcode" disabled="true" class="track-input" maxlength='20' type="text" placeholder="请输入车牌号" value='{{textValue}}' bindtap="showKeyboard" />
        <image class='search-icon' src='../../image/search_icon.png'></image>
        <image class='b-clear-icon' src='../../image/close-gray.png' catchtap='handleClear'></image>
      </view>
    </view>
    <view class='b-list-divider' wx:if='{{ tabIndex == 2 }}'></view>
  </view>
  <!-- 列表 -->
  <scroll-view scroll-y='true' style='height: {{ scrollHeight }}px'>
    <view class='content-layout'>
      <!-- 已预约、已签到列表 -->
      <block wx:if='{{ tabIndex != 2 && rootList && rootList.length !== 0 }}'>
        <view class='list-body' wx:for='{{ rootList }}' wx:key='item.id'>
          <view class='b-list-panel'>
            <text>{{ item.date }}</text>
          </view>
          <block wx:for="{{ item.insideList }}" wx:for-item='info' wx:key="info.id" wx:for-index="idx">
            <view class="item2" bindtap="handleDetail" data-item='info'>
              <view class="item-left">
                <image src="{{info.logo}}" class="image" />
              </view>
              <view class="item-middle">
                <view class="b-list-title">
                  <text>{{info.adName}}</text>
                </view>
                <view class="myad-li">
                  <view class="message">
                    <view class='b-item-left'>{{ info.username }}</view>
                    <view class="data-text theme-color">{{ info.phone }}</view>
                  </view>
                  <view class="message">
                    <view class='b-item-left'>{{ info.plate }}</view>
                    <view class="data-text">预约时间: {{info.sub_time}}</view>
                  </view>
                </view>
              </view>
              <view class="item_right">
                <view wx:if="{{ tabIndex == 0 }}">
                  <text class="time timetxt2">已预约</text>
                </view>
                <view wx:elif="{{ tabIndex == 1 }}">
                  <text class="time">已签到</text>
                </view>

              </view>
            </view>
            <view class="b-line" wx:if='{{ idx !== item.insideList.length - 1 }}'></view>
          </block>
          <view class='b-list-divider' wx:if='{{ index !== rootList.length - 1 }}'></view>
        </view>
      </block>
      <!-- 已完成列表 -->
      <block wx:elif='{{ tabIndex == 2 && cellList && cellList.length !== 0 }}'>
        <view class='cell-wrapper'>
          <cell cellList='{{ cellList }}' bind:navigate='navigateListener'></cell>
        </view>
      </block>
      <!-- 空页面 -->
      <block wx:else>
        <view class='guide-empty-wrapper'>
          <image class='guide-empty-image' src='../../image/empty_data.png'></image>
          <text class='guide-empty-text'>空空如也</text>
        </view>
      </block>
    </view>
  </scroll-view>
</view>

<!-- 车牌输入键盘 -->
<block wx:if="{{ isKeyboard }}">
  <view class='keyboard-mask' bindtap='handleMaskClick'></view>
  <view class="keyboard">

    <!--省份简写键盘-->
    <view class="td td_nor" wx:for="{{keyboardValue}}" wx:for-index="idx" wx:for-item="itemName" wx:key="*this" bindtap="tapKeyboard" data-index="{{idx}}" data-val="{{itemName}}" hover-class="board_bg" hover-start-time="0" hover-stay-time="80">
      {{itemName}}
    </view>

    <!--数字键盘不可点击-->
    <view wx:if="{{specialBtn && !tapNum}}" class="td td_num board_bg" wx:for="{{keyboardNumber}}" wx:for-index="idx" wx:for-item="itemName" wx:key="*this">
      {{itemName}}
    </view>

    <!--数字键盘可点击-->
    <view wx:if="{{specialBtn && tapNum}}" class="td td_num" wx:for="{{keyboardNumber}}" wx:for-index="idx" wx:for-item="itemName" wx:key="*this" bindtap="tapKeyboard" data-index="{{idx}}" data-val="{{itemName}}" hover-class="board_bg" hover-start-time="0"
      hover-stay-time="80">
      {{itemName}}
    </view>

    <!--字母键盘-->
    <view wx:if="{{specialBtn}}" class="td td_num" wx:for="{{keyboardAlph}}" wx:for-index="idx" wx:for-item="itemName" wx:key="*this" hover-class="board_bg" hover-start-time="0" hover-stay-time="80">
      <view class="del_icon" wx:if="{{idx == 19}}" bindtap="tapKeyboard" data-index="{{idx}}" data-val="{{itemName}}">
        <!--<image src="/images/icon_del.png" mode="aspectFit" class="del_icon"></image>-->
      </view>
      <view wx:elif="{{idx != 19}}" bindtap="tapKeyboard" data-index="{{idx}}" data-val="{{itemName}}">
        {{itemName}}
      </view>
    </view>

    <!--完成按钮 start-->
    <view class="td td_spec_fin" wx:for="{{keyboard2For}}" wx:for-index="idx" wx:for-item="itemName" wx:key="*this" bindtap="tapSpecBtn" data-index="{{idx}}" data-val="{{itemName}}" wx:if="{{specialBtn}}" hover-class="board_bg_spec" hover-start-time="0" hover-stay-time="80">
      {{itemName}}
    </view>
    <!--完成按钮 end-->
  </view>
</block>